
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>SmartTown — Municipal Sandbox (Vault + Connect Style)</title>
    <link rel="stylesheet" href="./assets/style.css"/>
  </head>
  <body>
    <header class="header no-print">
      <img class="logo" src="./assets/logo.svg" alt="SmartTown logo"/>
      <div>
        <h1>SmartTown — Municipal Sandbox</h1>
        <div class="sub">Simple systems for small towns • VAULT-style records, HubbCONNECT-style hub</div>
      </div>
      <div style="margin-left:auto;display:flex;gap:8px">
        <button id="theme">Toggle Theme</button>
        <button id="reset">Reset Sandbox</button>
      </div>
    </header>

    <div class="container">
      <div class="grid cols-3">
        <div class="card ribbon">
          <div class="kicker">SmartTown Hub</div>
          <p>Launch modules, check quick stats, and generate embed codes. All demo data is stored locally.</p>
          <div class="kpis">
            <div class="kpi"><div class="v" id="kpi-issues">0</div><div class="l">FIX Requests</div></div>
            <div class="kpi"><div class="v" id="kpi-lic">0</div><div class="l">Permit Apps</div></div>
            <div class="kpi"><div class="v" id="kpi-ap">0</div><div class="l">AP Batches</div></div>
            <div class="kpi"><div class="v" id="kpi-ts">0</div><div class="l">Timesheets</div></div>
          </div>
        </div>
        <div class="card">
          <div class="kicker">Quick Actions</div>
          <div class="grid cols-2">
            <a href="./modules/fix/index.html"><button class="secondary">New SmartFIX Request</button></a>
            <a href="./modules/permit/index.html"><button class="secondary">Start SmartPERMIT</button></a>
            <a href="./modules/timesheet/index.html"><button class="secondary">Submit SmartTIME</button></a>
            <a href="./modules/fiscal/index.html"><button class="secondary">Create AP Batch</button></a>
          </div>
          <hr/>
          <div class="small">Need embeds for CivicPlus/SharePoint? Try <a href="./modules/embed/index.html">SmartTown Embed</a>.</div>
        </div>
        <div class="card">
          <div class="kicker">Work Queue (Demo)</div>
          <p>See cross-module items in one place with <a href="./modules/workqueue/index.html">SmartQueue</a>.</p>
          <ul class="small">
            <li>Filters by module, department, and status</li>
            <li>Click any row to preview details (no secrets)</li>
          </ul>
        </div>
      </div>

      <nav class="grid cols-4 modules">
        <a href="./modules/fix/index.html"><strong>SmartFIX</strong> — DPW & Facilities <span class="badge info" style="float:right">Demo</span></a>
        <a href="./modules/permit/index.html"><strong>SmartPERMIT</strong> — Licensing Wizard</a>
        <a href="./modules/fiscal/index.html"><strong>SmartFISCAL</strong> — AP Turnover (Summary)</a>
        <a href="./modules/timesheet/index.html"><strong>SmartTIME</strong> — Timesheet Receipt</a>
        <a href="./modules/clerk/index.html"><strong>SmartCLERK</strong> — Agenda Item</a>
        <a href="./modules/vault/index.html"><strong>SmartVAULT</strong> — Records Viewer</a>
        <a href="./modules/crm/index.html"><strong>SmartCRM</strong> — Contacts & Notes</a>
        <a href="./modules/notify/index.html"><strong>SmartNOTIFY</strong> — Email Templates</a>
        <a href="./modules/workqueue/index.html"><strong>SmartQueue</strong> — Unified Work Queue</a>
        <a href="./modules/uikit/index.html"><strong>SmartUI Kit</strong> — Components</a>
        <a href="./modules/embed/index.html"><strong>SmartEmbed</strong> — CivicPlus/SharePoint</a>
      </nav>

      <footer>© SmartTown™ — Built for Rural America. Demo only. No integration URLs, no proprietary logic.</footer>
    </div>

    <div class="modal no-print"><div class="box"></div></div>
    <script src="../lib/utils.js"></script>
    <script src="../lib/sandbox-api.js"></script>
    <script>
      theme.init();
      document.getElementById('theme').addEventListener('click', theme.toggle);
      document.getElementById('reset').addEventListener('click', ()=>{
        if(confirm('Reset demo data?')){ SmartTown.reset(); location.reload(); }
      });
      const s = SmartTown.stats();
      document.getElementById('kpi-issues').textContent = s.issues;
      document.getElementById('kpi-lic').textContent = s.licenses;
      document.getElementById('kpi-ap').textContent = s.ap_turnovers;
      document.getElementById('kpi-ts').textContent = s.timesheets;
    </script>
  </body>
</html>
